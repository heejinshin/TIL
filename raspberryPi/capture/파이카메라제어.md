

# 파이카메라제어 

- 이미지캡처

# 이미지캡처

- stream메서드
- string객체, IOBytes

기존에 파일객체를 사용하던 것이 open()함수 사용 등으로 속도가 상대적으로 느려 캡처한 이미지의 데이터를 중요하게 활용하는 IOBytes를 사용. IOBytes는 byte배열을 얻는것, 즉 캡처이미지를 데이터가 담겨있는 byte배열로 객체화. 파일의 모든 속성을 갖지만 실제 파일이 아니라 메모리에 데이터 작업만 해둔다. 즉, 실제 하드디스크에 파일형태로는 운영하지 않는다. 또한, 메모리기반 동작으로, 속도가 빠르고 여기를 통해서 데이터의 byte배열을 얻어낼 수가 있다. 

~~~ 
camera.capture(stream[,'포맷'])
~~~

---

### 스트림으로 캡처하기

  ~~~ 
  from io import BytesIO
  //IO모듈의 bytesIO 불러옴 
  ~~~

- io모듈

  - 다양한 유형의 I/O를 처리하기 위한 파이썬의 주 장치 제공

    - 텍스트(text) I/O / 바이너리(binary) I/O / 원시(raw) I/O 
    - 위 범주 중 하나에 속하는 구상 객체를 파일객체라고 하며 이를 스트림(stream)과 파일류 객체(file-like object)라고 한다.

    - 모든 스트림은 인자의 데이터형에 주의해야 한다. 예를들어 str객체를 바이너리 스트림의 write() 메서드에 제공하면 TypeError가 발생한다. (텍스트 스트림의 write()메서드에 bytes객체를 제공하는 것도 마찬가지)

---

- bytesIO에 대한 연장 설명
  - 내부에 있는 바이트 버퍼를 대상으로 write, read 사용(파일에서 제공하는 메서드 지원함)
  - 인터페이스 자체는 파일의 메카니즘이다. 외부에서 볼땐 파일과 동일함. 파일처럼 다루는데 실제로는 메모리에서 조작이 일어나기 때문에 다르다.
  - 그래서 이를 in-memory stream이라 부른다.(메모리 내에서만 이루어지는것)

~~~ 
my_stream = BytesIO()   //객체 인스턴스화
camera.capture(my_stream,'jpg')
~~~

- 코드 설명
  - my_stream객체는 BytesIO 객체, 즉 파일명(경로)이 없기 때문에 포맷을 따로 지정해주어야 한다. 
  - 이어지는 후속작업-> 인자로 받은 my_stream에서 byte배열을 추출해낸다.

