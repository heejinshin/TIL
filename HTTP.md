# HTTP

웹상에서 클라이언트와 서버 간 통신을 위한 프로토콜

- 주요특징
  - 텍스트 기반의 통신
  - 8번 포트 default
  - 대표 클라이언트는 브라우저인데 그 외 다양한 것들이 그 역할을 할 수 있다.
  - 무상태, 서버측에서 접속에 대한 상태를 유지하지 않는다(stateless)

! 상태라인과 헤더는 django에서 생성하고 우리가 하는건 body를 어떻게 구성할 것인지 

## WAS(Web Application Server)

웹브라우저와 같은 클라이언트로부터 웹서버가 요청을 받았을 때 애플리케이션에 대한 로직으로 반환하여주는 소프트웨어로 동적인 컨텐츠 (JSP, ASP, PHP등)를 받아 처리한다.

DB에 대한 정보가 있기 때문에 외부 노출시 보안상 문제가 될 수 있다. 

## 클라이언트 서버구조

response / request

클라이언트는 서버에 요청을 보내고 기다린다. 서버가 클라이언트의 요청에 대한 응답을 결과로 만들어서 응답한다. 이는 클라이언트가 UI에 집중하고 독립적으로 존재하도록 한다. 

- http request
  - 요청라인: HTTP메서드 방식 및 요청URL과 프로토콜 정보
  - 요청헤더: 웹 브라우저 정보,언어,인코딩 방식,요청 서버 정보 등 추가 정보. 해당 os정보가 같이 넘어간다
  - 요청본체: 요청에 필요한 내용, GET요청 시에는 이 부분이 없음

- http response
  - 상태라인
  - 응답헤더: 응답 처리 날짜, 인코딩 방식, 요청 서버 정보 등과 같은 추가 정보
  - 응답본체: 클라이언트한테 실제 보내는 내용, 헤더와 \n로 구분
    - 응답으로 내보내는게 file을 내보내는게 아니라 str이 나가는것. 

## 무상태 프로토콜

서버가 클라이언트의 접속에 대한 상태를 유지하지 않는다(stateless)

-> 서버가 클라이언트를 식별할 수 없다. (로그인 같은 경우 무상태로 해버리면 화면이 바뀔때마다 인증해줘야하는 번거로움이 발생)

이의 장점은 <u>서버 확장성</u>이 높다는 것이다.(서버 이용을 하다보면 이용자수 증가와 같은 이유로 확장이 필요하다.) 

이를 찾아보니 아래와 같은 개념이 등장한다. 

[*스케일 아웃: 서버를 여러 대 추가하여 시스템을 확장하는 방법]

[*스케일업: 서버에 CPU나 RAM 등을 추가하거나 고성능의 부품, 서버로 교환하는 방법]

무상태 프로토콜 특성의 단점은 클라이언트가 추가데이터를 전송해야 한다는 것이다. 그 부가정보는 서버가 해석해야 한다. 

수강신청과 같은 대용량 트래픽이 발생하는 시스템을 개발할 때 최대한 stateless를 활용해서 개발해야한다고 하니 이해가 간다. 

## 상태코드

- 2xx: OK

- 4xx (Not Found): 클라이언트 오류(요청오류), url을 잘못 썼거나 필요한 정보를 넘기지 않았거나 *404(page not found)

- 5xx (Internal Server Error): 서버 오류, (처리하다가 파이썬에서 예외가 발생)

  개발중에는 5xx가 유용, 코드 문제 확보. 

  실제 서비스에서는 안나도록 해야한다. (사용자에게 신뢰성)



## HTTP 메서드

- `GET` 메서드는 특정 리소스의 표시를 요청한다. `GET`을 사용하는 요청은 오직 데이터를 받기만 한다.

- `post` 메서드는 특정 리소스에 엔티티를 제출할 때 쓰인다. 이는 종종 서버의 상태의 변화나 부작용을 일으킨다고 한다.  (본문에 데이터를 넣어 서버에 전송하는 삽입과정에서 발생하는 것 같다.)

  *엔티티: 실체, 객체. 저장되기 위한 어떤 것.

- `PUT` 메서드는 목적 리소스 모든 현재 표시를 요청 payload로 바꾼다. 
  - 클라이언트가 url을 알고 지정
    - 리소스를 대체한다. 없으면 생성하고 있으면 덮어씌우는 방식